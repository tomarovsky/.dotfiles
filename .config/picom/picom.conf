# Shadows
shadow = true;
shadow-radius = 8;
shadow-opacity = 0.6;
shadow-offset-x = -3;
shadow-offset-y = -3;

# Fading
fading = true;
fade-in-step = 0.03;
fade-out-step = 0.03;
fade-delta = 4;
no-fading-openclose = true;

# Transparency / Opacity
# (Базовая прозрачность рамок и окон. Специфичная прозрачность теперь задается в rules)
frame-opacity = 1.0;
detect-client-opacity = true;

# General settings
backend = "glx";
vsync = true;
detect-rounded-corners = true;
use-ewmh-active-win = true;
detect-transient = true;
detect-client-leader = true;
use-damage = true;
log-level = "warn";

# Новая система правил (заменяет wintypes и старые opacity-rule/shadow-exclude)
rules: (
  {
    # Настройки для всплывающих подсказок
    match = "window_type = 'tooltip'";
    fade = false;
    shadow = true;
    opacity = 0.75;
    full-shadow = false;
  }, 
  {
    # Отключаем размытие фона для доков, рабочего стола и окон с рамками GTK
    match = "window_type = 'dock' || window_type = 'desktop' || _GTK_FRAME_EXTENTS@";
    blur-background = false;
  }, 
  {
    # Убираем закругление углов у панелей и рабочего стола
    match = "window_type = 'dock' || window_type = 'desktop'";
    corner-radius = 0;
  }, 
  {
    # Отключаем тени для меню, дропдаунов и служебных окон (перенос из wintypes)
    match = "window_type = 'dock' || window_type = 'dnd' || window_type = 'popup_menu' || window_type = 'dropdown_menu' || window_type = 'menu' || window_type = 'utility'";
    shadow = false;
  }, 
  {
    # Исключения теней для конкретных приложений
    match = "name = 'Notification' || class_g = 'Conky' || class_g ?= 'Notify-osd' || class_g = 'Cairo-clock' || _GTK_FRAME_EXTENTS@";
    shadow = false;
  }
)
